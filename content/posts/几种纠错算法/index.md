---
title: "几种纠错算法"
date: 2024-12-16T20:18:31+08:00
description: "介绍几种常用的纠错算法ECC, LDPC, RAID, RS-FEC"
categories: ["IC"]
tags: ["算法", "纠错", "IC", "FPGA"]
comment: true
draft: false
---
纠错在计算机体系中非常常见, 在传输过程中以及存储过程中都有可能产生错误, 这其实非常常见。例如, 对于NAND Flash类型的存储介质(SD, EMMC, SSD等都属与这一类型), 通过在浮动栅极(floating gate)中存储电子来代表0和1, 在进行**写**或**擦除**等操作时, 电子会穿过浮动栅极, 而浮动栅极有个缺陷, 在电子反复穿过Floating Gate后, 电子存储的能力变弱, 那么所代表的0和1将不再可靠! 我们可以通过**纠错算法**来保证数据正确, 或**磨损平衡**的算法机制来提高整个存储介质的寿命和可靠性。当然我们这里不介绍**磨损平衡。**

那么, 常用的纠错算法有哪些呢:

## ECC

在正式介绍ECC之前, 我们先来看看Check Sum(校验和)。Check Sum是一种检错机制, 这个非常简单, 应用也非常广, 例如经典的UART协议中8bit数据后可以附1bit校验和, 分为奇校验和偶校验。

 ![1735048798402.png](./1735048798402.png)

在UART中Check Sum可以检查出8bit中的1bit误码。但这只是检错, 我们无法知道8bit中哪一个地址是错的。试想一下, 如果每1bit data都有1bit Check, 那就可以完成纠错了!

但这样太傻了, 这不就相当于复制了一份吗, 效率直接砍了一半?

那么ECC是怎么做的呢, 我们拿一张带ECC的内存条看看, 图中是一个带ECC的DDR内存条, 可以看到共使用了9个8bit位宽的SDRAM内存颗粒, 也就是总共72bit位宽, 其中64bit用于数据, 8bit用于ECC。

ECC是如何用8bit来完成64bit数据的纠错的。这其实很好理解, 我们只需要知道是哪个bit出错, 那么8bit可以包含的地址信息就是2^8=64个。

当然, 真正的ECC远不止这些, 要真正使用, 还需要考虑如何计算, 能否在和data同一拍时钟给Memory Controller, 怎么计算效率高, 用的资源少。我们先按下不表。

![1735048984757](image/1735048984757.png)

那么基于上面的情况, 我们深入一下:

1. 有没有可能数据是对的, 但是Check Sum算错了呢!!!? 此时我该相信谁?
2. 那如果是2bit错误呢, 上述利用Check Sum就无能为力了。
3. ![1734360742930](image/几种纠错算法/1734360742930.png)

## FEC

FEC也就是前向纠错,
